\doxysection{C\+:/\+Users/gallo/\+One\+Drive/\+Documents/\+SAé-\/casali/\+SAE\+\_\+\+TV\+\_\+\+CONNECTEES/public/wp-\/content/plugins/plugin-\/ecran-\/connecte/src/controllers/\+Technician\+Controller.\+php}
\hypertarget{_c_1_2_users_2gallo_2_one_drive_2_documents_2_s_a_xC3_xA9-casali_2_s_a_e__t_v__c_o_n_n_e_c_t_e_e3f82f9cd37de30fbbb87d3092fe362bf}{}\label{_c_1_2_users_2gallo_2_one_drive_2_documents_2_s_a_xC3_xA9-casali_2_s_a_e__t_v__c_o_n_n_e_c_t_e_e3f82f9cd37de30fbbb87d3092fe362bf}Insère un nouvel utilisateur de type technicien dans la base de données.

Cette méthode traite les données soumises via un formulaire pour créer un nouvel utilisateur technicien. Elle effectue les validations nécessaires sur les entrées, telles que la longueur des chaînes et la confirmation du mot de passe, avant de les insérer dans la base de données. Si l\textquotesingle{}insertion réussit, un message de validation est affiché, sinon un message d\textquotesingle{}erreur est présenté.

\begin{DoxyReturn}{Renvoie}
string Retourne l\textquotesingle{}affichage du formulaire de création de technicien ou un message de validation ou d\textquotesingle{}erreur selon le résultat de l\textquotesingle{}insertion.
\end{DoxyReturn}
// Insérer un nouveau technicien \+: \$this-\/\texorpdfstring{$>$}{>}insert();


\begin{DoxyExceptions}{Exceptions}
{\em Exception} & Si une erreur se produit lors de l\textquotesingle{}insertion dans la base de données (facultatif, selon l\textquotesingle{}implémentation de {\ttfamily insert} dans le modèle).\\
\hline
\end{DoxyExceptions}
\begin{DoxyVersion}{Version}
1.\+0 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
2024-\/10-\/15
\end{DoxyDate}

\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{<?php}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_controllers}{Controllers}};}
\DoxyCodeLine{}
\DoxyCodeLine{use\ \mbox{\hyperlink{class_models_1_1_code_ade}{Models\(\backslash\)CodeAde}};}
\DoxyCodeLine{use\ \mbox{\hyperlink{class_models_1_1_user}{Models\(\backslash\)User}};}
\DoxyCodeLine{use\ \mbox{\hyperlink{class_views_1_1_technician_view}{Views\(\backslash\)TechnicianView}};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{class\ }TechnicianController\ \textcolor{keyword}{extends}\ UserController\ implements\ Schedule}
\DoxyCodeLine{\{}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{private}\ \$model;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{private}\ \$view;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ \_\_construct()\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ parent::\_\_construct();}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \$this-\/>model\ =\ \textcolor{keyword}{new}\ User();}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \$this-\/>view\ =\ \textcolor{keyword}{new}\ TechnicianView();}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ insert()\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \$action\ =\ filter\_input(INPUT\_POST,\ \textcolor{stringliteral}{'createTech'});}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (isset(\$action))\ \{}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \$login\ =\ filter\_input(INPUT\_POST,\ \textcolor{stringliteral}{'loginTech'});}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \$password\ =\ filter\_input(INPUT\_POST,\ \textcolor{stringliteral}{'pwdTech'});}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \$passwordConfirm\ =\ filter\_input(INPUT\_POST,\ \textcolor{stringliteral}{'pwdConfirmTech'});}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \$email\ =\ filter\_input(INPUT\_POST,\ \textcolor{stringliteral}{'emailTech'});}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Validation\ des\ données\ d'entrée}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_string(\$login)\ \&\&\ strlen(\$login)\ >=\ 4\ \&\&\ strlen(\$login)\ <=\ 25\ \&\&}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ is\_string(\$password)\ \&\&\ strlen(\$password)\ >=\ 8\ \&\&\ strlen(\$password)\ <=\ 25\ \&\&}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$password\ ===\ \$passwordConfirm\ \&\&\ is\_email(\$email))\ \{}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$this-\/>model-\/>setLogin(\$login);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$this-\/>model-\/>setPassword(\$password);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$this-\/>model-\/>setEmail(\$email);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$this-\/>model-\/>setRole(\textcolor{stringliteral}{'technicien'});}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Insertion\ dans\ la\ base\ de\ données}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$this-\/>model-\/>insert())\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$this-\/>view-\/>displayInsertValidate();}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$this-\/>view-\/>displayErrorInsertion();}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$this-\/>view-\/>displayErrorCreation();}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>view-\/>displayFormTechnician();}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ displayAllTechnician()\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \$users\ =\ \$this-\/>model-\/>getUsersByRole(\textcolor{stringliteral}{'technicien'});}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>view-\/>displayAllTechnicians(\$users);}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ displayMySchedule()\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \$codeAde\ =\ \textcolor{keyword}{new}\ CodeAde();}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \$years\ =\ \$codeAde-\/>getAllFromType(\textcolor{stringliteral}{'year'});}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \$string\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{foreach}\ (\$years\ as\ \$year)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \$string\ .=\ \$this-\/>displaySchedule(\$year-\/>getCode());}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$string;}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCodeInclude}
 